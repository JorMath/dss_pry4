<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Límite de Restablecimiento - Sistema de Incidentes</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'accounts/css/nothing-style.css' %}?v=2028">
</head>
<body class="login-body">
    <div class="login-container">
        <div class="login-card">
            <div class="form-icon">
                <i class="fas fa-clock"></i>
            </div>
            
            <h1 class="form-title">Límite de Restablecimiento Alcanzado</h1>
            
            <div class="info-box">
                <p><strong>Has excedido el límite de intentos de restablecimiento de contraseña</strong></p>
                <p>Por seguridad, hemos limitado temporalmente esta función.</p>
            </div>
            
            <div class="info-message">
                <p>Límites de restablecimiento de contraseña:</p>
                <ul>
                    <li><strong>Máximo 3 intentos</strong> por dirección IP cada 10 minutos</li>
                    <li><strong>Máximo 5 intentos</strong> por usuario cada hora</li>
                </ul>
            </div>
            
            <div class="countdown" id="countdown">
                Podrás intentar nuevamente en: <span id="timer">10:00</span>
            </div>
            
            <div class="form-actions">
                <a href="{% url 'login' %}" class="btn btn-primary">
                    ← Volver al Login
                </a>
                <a href="{% url 'forgot_password' %}" class="btn btn-secondary" id="retry-btn">
                    <i class="fas fa-redo"></i>
                    Reintentar Restablecimiento
                </a>
            </div>
        </div>
    </div>

    <script>
        // Countdown timer (10 minutos para forgot password)
        let timeLeft = 600; // 10 minutos en segundos
        
        function updateCountdown() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            
            document.getElementById('timer').textContent = 
                `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            if (timeLeft <= 0) {
                document.getElementById('countdown').innerHTML = 
                    '<span style="color: #ff8a65;">¡Ya puedes intentar nuevamente!</span>';
                
                // Actualizar el botón de reintentar
                const retryButton = document.getElementById('retry-btn');
                retryButton.innerHTML = 'Reintentar Ahora';
                retryButton.style.background = 'linear-gradient(135deg, #ff8a65, #ff7043)';
                return;
            }
            
            timeLeft--;
            setTimeout(updateCountdown, 1000);
        }
        
        // Iniciar countdown
        updateCountdown();
    </script>
        </div>
    </div>
</body>
</html>
